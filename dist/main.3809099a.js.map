{"version":3,"sources":["main.js"],"names":["$siteList","$","$dlg","$deleteBtn","$finishBtn","$cancelBtn","xObject","JSON","parse","localStorage","getItem","hashMap","logo","url","des","removeHeader","replace","dlg","show","site","val","removeClass","hide","reload","render","addClass","selIndex","loadEvent","lis","forEach","node","index","$li","push","html","join","click","e","target","dataset","stopPropagation","preventDefault","on","getSite","splice","window","onbeforeunload","setItem","stringify","siteList","toUpperCase","string","document","key","i","length","open"],"mappings":"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","file":"main.3809099a.js","sourceRoot":"..\\src","sourcesContent":["const $siteList = $('.siteList')\r\nconst $dlg = $('.dlg-container')\r\nconst $deleteBtn = $(\".delete-btn\");\r\nconst $finishBtn = $(\".finish-btn\");\r\nconst $cancelBtn = $(\".cancel-btn\");\r\n//取出缓存x\r\n//将JSON数据重新转换为对象\r\nconst xObject = JSON.parse(localStorage.getItem('x'));\r\n//如果xObject不为falsy值，使用xObject,如果是falsy值，使用初始值\r\nconst hashMap = xObject || [\r\n    {logo: 'A', url: 'https://www.acfun.cn', des: 'Acfun'},\r\n    {logo: 'B',  url: 'https://bilibili.com', des: 'Bilibili'}\r\n];\r\nconst removeHeader = (url) => {\r\n    return url.replace('https://', '')\r\n        .replace('http://', '')\r\n        .replace('www.', '')\r\n        .replace(/\\/.*/, '')\r\n}\r\n\r\nconst dlg = {\r\n    show: (site={des:'',url:''})=>{\r\n        const {des,url} = site;\r\n        $(\"#des\").val(des);\r\n        $(\"#url\").val(url);\r\n        $dlg.removeClass(\"hide-dlg\");\r\n    },\r\n    hide: (reload=false)=>{\r\n        if(reload){\r\n            render();\r\n        }\r\n        $dlg.addClass(\"hide-dlg\");\r\n    },\r\n    selIndex: null,\r\n};\r\n\r\n\r\n\r\nloadEvent();\r\nrender();\r\n\r\n\r\nfunction render(){\r\n    // $siteList.find('li:not(.lastLi)').remove();\r\n    const lis = [];\r\n    hashMap.forEach((node,index) => {\r\n        const $li = (`\r\n    <a href=\"${node.url}\">\r\n      <li class=\"site\">\r\n        <div class=\"logo\">${node.logo}</div>\r\n        <div class=\"link\">${node.des}</div>\r\n        <button data-index=\"${index}\" class=\"list-more\" title=\"修改\"></button>\r\n      </li>\r\n    </a>\r\n    `);\r\n        lis.push($li);\r\n    });\r\n    lis.push(`<li class=\"lastLi\">\r\n          <div class=\"addButton\">\r\n            <svg class=\"icon\" aria-hidden=\"true\">\r\n              <use xlink:href=\"#iconadd\"></use>\r\n            </svg>\r\n          </div>\r\n        </li>`);\r\n    $siteList.html(lis.join(\"\"));\r\n    $(\".list-more\").click((e)=>{\r\n        const {index} = e.target.dataset;\r\n        dlg.selIndex = index;\r\n        dlg.show(hashMap[index]);\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    });\r\n    $('.addButton').on('click', () => {\r\n        dlg.selIndex = null;\r\n        dlg.show();\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction loadEvent(){\r\n    $cancelBtn.click((e)=>{\r\n        dlg.hide();\r\n    });\r\n    $finishBtn.click((e)=>{\r\n        const des = $(\"#des\").val();\r\n        const url = $(\"#url\").val();\r\n        if(des && url) {\r\n            const site = getSite(des,url);\r\n            if(dlg.selIndex<url){\r\n                hashMap[dlg.selIndex] = site;\r\n            }else{\r\n                hashMap.push(site);\r\n            }\r\n            dlg.hide(true);\r\n        }\r\n    });\r\n    $deleteBtn.click(()=>{\r\n        if(dlg.selIndex){\r\n            hashMap.splice(dlg.selIndex,1);\r\n        }\r\n        dlg.hide(true);\r\n    });\r\n    window.onbeforeunload = ()=>{\r\n        localStorage.setItem(\"siteStorage\",JSON.stringify(siteList));\r\n    };\r\n}\r\n\r\nfunction getSite(des,url){\r\n    const logo = removeHeader(url)[0].toUpperCase();\r\n    return {\r\n    logo: logo,  url: url, des: des\r\n    };\r\n}\r\n\r\nwindow.onbeforeunload = () => {\r\n    //将hashmap转换成JSON格式(即字符串类型)，存入本地缓存\r\n    const string = JSON.stringify(hashMap);\r\n    localStorage.setItem('x', string);\r\n}\r\n\r\n$(document).on('keypress',(e)=>{\r\n    const {key} = e;\r\n    for(let i=0;i<hashMap.length;i++){\r\n        if(hashMap[i].logo.toUpperCase() === key.toUpperCase()){\r\n            window.open(hashMap[i].url)\r\n        }\r\n    }\r\n});"]}